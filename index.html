<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Survive the Wild â€“ Mobile Audio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
  body {
    margin: 0;
    height: 100vh;
    background: black;
    color: white;
    font-size: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>
</head>
<body>
<div id="screen">Tap to start</div>

<script>
const speech = window.speechSynthesis;
let lastMessage = "";
let menuIndex = 0;
let started = false;

const game = {
  day: 1,
  health: 100,
  hunger: 0,
  thirst: 0,
  inventory: { food: 1, wood: 0 }
};

const menu = [
  { label: "Explore", action: explore },
  { label: "Forage", action: forage },
  { label: "Rest", action: rest },
  { label: "Check inventory", action: inventory }
];

function speak(text) {
  speech.cancel();
  lastMessage = text;
  speech.speak(new SpeechSynthesisUtterance(text));
}

function status() {
  speak(
    `Day ${game.day}. Health ${game.health}. Hunger ${game.hunger}. Thirst ${game.thirst}. 
    ${menu[menuIndex].label}.`
  );
}

function nextTurn() {
  game.day++;
  game.hunger += 10;
  game.thirst += 10;

  if (game.hunger >= 100 || game.thirst >= 100) game.health -= 20;

  if (game.health <= 0) {
    speak("You collapse from exhaustion. Game over.");
    return;
  }
  status();
}

function explore() {
  const r = Math.random();
  if (r < 0.4) {
    game.inventory.food++;
    speak("You find edible berries.");
  } else if (r < 0.7) {
    game.inventory.wood++;
    speak("You gather wood.");
  } else {
    game.health -= 10;
    speak("You are injured while exploring.");
  }
  nextTurn();
}

function forage() {
  game.inventory.food++;
  game.hunger = Math.max(0, game.hunger - 20);
  speak("You forage and eat.");
  nextTurn();
}

function rest() {
  game.health = Math.min(100, game.health + 20);
  speak("You rest and recover.");
  nextTurn();
}

function inventory() {
  speak(`Inventory. Food ${game.inventory.food}. Wood ${game.inventory.wood}.`);
}

let touchStartY = 0;
let lastTap = 0;
let fingers = 0;

document.body.addEventListener("touchstart", e => {
  fingers = e.touches.length;
  touchStartY = e.touches[0].clientY;
});

document.body.addEventListener("touchend", e => {
  const now = Date.now();

  if (!started) {
    started = true;
    speak("Welcome to Survive the Wild. Swipe to navigate. Double tap to choose.");
    return;
  }

  if (fingers === 2) {
    speak(lastMessage);
    return;
  }

  const dy = e.changedTouches[0].clientY - touchStartY;

  if (Math.abs(dy) > 40) {
    if (dy < 0) {
      menuIndex = (menuIndex - 1 + menu.length) % menu.length;
    } else {
      menuIndex = (menuIndex + 1) % menu.length;
    }
    speak(menu[menuIndex].label);
    return;
  }

  if (now - lastTap < 400) {
    menu[menuIndex].action();
  }

  lastTap = now;
});
</script>
</body>
</html>