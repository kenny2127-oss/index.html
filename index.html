<!DOCTYPE html>
<html>
<head>
  <title>Madden Style Football</title>
  <style>
    button, select { display:block; margin:10px; font-size:18px; }
  </style>
</head>
<body>
  <h1>Madden Style Football</h1>

  <!-- Main Menu -->
  <div id="menu" role="navigation" aria-label="Main Menu">
    <button onclick="startQuickPlay()" aria-label="Start Quick Play">Quick Play</button>
    <button onclick="startFranchise()" aria-label="Start Franchise Mode">Franchise</button>
  </div>

  <!-- Quick Play Team Selection -->
  <div id="teamSelection" style="display:none;" aria-label="Team Selection">
    <h3>Select Teams</h3>
    <label for="homeTeamSelect">Home Team:</label>
    <select id="homeTeamSelect">
      <option value="49ers" selected>49ers</option>
      <option value="Cowboys">Cowboys</option>
      <option value="Eagles">Eagles</option>
      <option value="Packers">Packers</option>
      <option value="Giants">Giants</option>
    </select>

    <label for="awayTeamSelect">Away Team:</label>
    <select id="awayTeamSelect">
      <option value="Cowboys">Cowboys</option>
      <option value="Eagles">Eagles</option>
      <option value="Packers">Packers</option>
      <option value="Giants">Giants</option>
      <option value="49ers">49ers</option>
    </select>

    <button onclick="startGame()" aria-label="Start Game">Start Game</button>
  </div>

  <!-- Game Screen -->
  <div id="game" style="display:none;">
    <div id="scoreboard" aria-live="polite"></div>
    <div id="situation" aria-live="polite"></div>

    <!-- Offensive Playbook -->
    <div id="offensePlays" style="display:none;" aria-label="Offensive Playbook">
      <h3>Offensive Playbook</h3>
      <button onclick="callPlay('run')" aria-label="Run Play">Run Play</button>
      <button onclick="callPlay('shortPass')" aria-label="Short Pass Play">Short Pass</button>
      <button onclick="callPlay('longPass')" aria-label="Long Pass Play">Long Pass</button>
    </div>

    <!-- Defensive Playbook -->
    <div id="defensePlays" style="display:none;" aria-label="Defensive Playbook">
      <h3>Defensive Playbook</h3>
      <button onclick="chooseDefense('blitz')" aria-label="Blitz Defense">Blitz</button>
      <button onclick="chooseDefense('zone')" aria-label="Zone Defense">Zone</button>
      <button onclick="chooseDefense('man')" aria-label="Man Coverage Defense">Man Coverage</button>
    </div>

    <!-- Fourth Down Options -->
    <div id="fourthDownOptions" style="display:none;" aria-label="Fourth Down Options">
      <h3>Fourth Down Options</h3>
      <button onclick="fieldGoal()" aria-label="Kick Field Goal">Kick Field Goal</button>
      <button onclick="punt()" aria-label="Punt Ball">Punt</button>
      <button onclick="callPlay('goForIt')" aria-label="Go For It on Fourth Down">Go For It</button>
    </div>

    <button onclick="nextQuarter()" aria-label="Next Quarter">Next Quarter</button>
  </div>

  <script>
    let homeTeam = "49ers";
    let awayTeam = "Eagles";
    let homeScore = 0;
    let awayScore = 0;
    let possession = "home";
    let currentDown = 1;
    let yardsToFirst = 10;
    let ballPosition = 25;
    let quarter = 1;
    let defenseChoice = "zone";

    function announce(message) {
      const liveRegion = document.getElementById('situation');
      liveRegion.innerText = message;
      document.getElementById('offensePlays').style.display = 'block';
      document.getElementById('fourthDownOptions').style.display = 'none';
    }

    function startQuickPlay() {
      document.getElementById('menu').style.display = 'none';
      document.getElementById('teamSelection').style.display = 'block';
      announce("Quick Play selected. Choose your home and away teams.");
    }

    function startGame() {
      homeTeam = document.getElementById('homeTeamSelect').value;
      awayTeam = document.getElementById('awayTeamSelect').value;
      homeScore = 0;
      awayScore = 0;
      possession = "home";
      currentDown = 1;
      yardsToFirst = 10;
      ballPosition = 25;
      quarter = 1;

      document.getElementById('teamSelection').style.display = 'none';
      document.getElementById('game').style.display = 'block';
      document.getElementById('offensePlays').style.display = 'block';
      updateSituation();
      announce(`Game starting. ${homeTeam} vs ${awayTeam}. ${homeTeam} has the ball at the ${ballPosition} yard line.`);
    }

    function startFranchise() {
      announce("Franchise Mode coming soon!");
    }

    function updateSituation() {
      let teamWithBall = (possession === "home") ? homeTeam : awayTeam;
      document.getElementById('scoreboard').innerText = `${homeTeam} ${homeScore} - ${awayScore} ${awayTeam}`;
      document.getElementById('situation').innerText =
        `${currentDown} and ${yardsToFirst} at the ${ballPosition} yard line. ${teamWithBall} ball.`;
    }

    function chooseDefense(choice) {
      defenseChoice = choice;
      announce(`Defense sets ${choice}`);
    }

    function callPlay(playType) {
      let yards = 0;
      let defense = defenseChoice;

      if (playType === 'run') {
        yards = Math.floor(Math.random() * 3) + 2;
        if (defense === "blitz") yards -= 1;
      } else if (playType === 'shortPass') {
        yards = Math.floor(Math.random() * 6) + 10;
        if (defense === "zone") yards -= 5;
      } else if (playType === 'longPass') {
        yards = Math.floor(Math.random() * 11) + 30;
        if (defense === "man") yards -= 10;
      } else if (playType === 'goForIt') {
        yards = Math.floor(Math.random() * 10) + 1;
      }

      if (yards < 0) yards = 0;

      ballPosition += yards;
      yardsToFirst -= yards;

      let msg = `${(possession === "home" ? homeTeam : awayTeam)} gained ${yards} yards. `;

      if (ballPosition >= 100) {
        msg += "Touchdown!";
        if (possession === "home") homeScore += 7; else awayScore += 7;
        changePossession(true);
      } else if (yardsToFirst <= 0) {
        currentDown = 1;
        yardsToFirst = 10;
        msg += "First down!";
      } else {
        currentDown++;
        if (currentDown > 4) {
          msg += "Turnover on downs.";
          changePossession();
        }
      }

      updateSituation();
      announce(`${msg} Current down: ${currentDown}, ${yardsToFirst} yards to first down, ball at ${ballPosition} yard line.`);
    }

    function punt() {
      let puntYards = Math.floor(Math.random() * 20) + 40;
      ballPosition = 100 - puntYards;
      changePossession();
      let teamWithBall = (possession === "home") ? homeTeam : awayTeam;
      announce(`Punt goes ${puntYards} yards. ${teamWithBall} takes over at the ${ballPosition} yard line.`);
      updateSituation();
    }

    function fieldGoal() {
      if (ballPosition >= 60) {
        announce("Field goal is good!");
        if (possession === "home") homeScore += 3; else awayScore += 3;
      } else {
        announce("Field goal is no good.");
      }
      changePossession(true);
      updateSituation();
    }

    function changePossession(reset=false) {
      possession = (possession === "home") ? "away" : "home";
      currentDown = 1;
      yardsToFirst = 10;
      ballPosition = reset ? 25 : 100 - ballPosition;
    }

    function nextQuarter() {
      quarter++;
      if (quarter === 3) {
        announce("Halftime show starting!");
      } else if (quarter > 4) {
        announce("Game Over! Final score " +
          `${homeTeam} ${homeScore}, ${awayTeam} ${awayScore}`);
      } else {
        announce(`Starting Quarter ${quarter}`);
      }
    }
  </script>
</body>
</html>