<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pok√©mon Adventure</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#3b4cca">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <style>
    body { font-family: sans-serif; margin: 0; }
    nav { display: flex; background: #3b4cca; padding: 10px; }
    nav button { flex: 1; background: white; border: none; padding: 10px; }
    nav button[aria-selected="true"] { background: #ffcb05; font-weight: bold; }
    section { display: none; padding: 20px; }
    section.active { display: block; }
    #installBtn { margin: 10px; padding: 10px; background: #ffcb05; border: none; border-radius: 8px; }
  </style>
  <script>
    let deferredPrompt;
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      document.getElementById("installBtn").style.display = "block";
    });
    function installApp() {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.finally(() => deferredPrompt = null);
      }
    }
    function switchTab(tabId) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
      document.querySelectorAll(".tab-button").forEach(btn => btn.setAttribute("aria-selected","false"));
      document.querySelector(`[data-tab='${tabId}']`).setAttribute("aria-selected","true");
      document.getElementById("tabTitle").innerText = tabId.charAt(0).toUpperCase() + tabId.slice(1) + " tab selected";
    }
    window.onload = () => switchTab("home");
  </script>
</head>
<body>
  <header>
    <h1 id="tabTitle">Home tab selected</h1>
    <nav>
      <button class="tab-button" data-tab="home" aria-selected="true" onclick="switchTab('home')">Home</button>
      <button class="tab-button" data-tab="explore" aria-selected="false" onclick="switchTab('explore')">Explore</button>
      <button class="tab-button" data-tab="battle" aria-selected="false" onclick="switchTab('battle')">Battle</button>
      <button class="tab-button" data-tab="trade" aria-selected="false" onclick="switchTab('trade')">Trade</button>
    </nav>
    <button id="installBtn" style="display:none;" onclick="installApp()">üì≤ Install App</button>
  </header>

  <main>
    <section id="home" class="active">
      <h2>Pok√©dex</h2>
      <div id="pokedex"></div>
      <button id="transferButton">Transfer Pok√©dex from another app</button>
    </section>

    <section id="explore">
      <h2>Explore</h2>
      <button id="catchBtn">Catch Pok√©mon</button>
    </section>

    <section id="battle">
      <h2>Battle</h2>
      <p>Battle mode coming soon!</p>
    </section>

    <section id="trade">
      <h2>Trade with other players</h2>
      <button id="offerPokemonBtn">Offer Pok√©mon</button>
      <div id="tradeResult"></div>
    </section>
  </main>
</body>
</html>