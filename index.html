<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Accessible Madden Style Game</title>
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#fff; text-align:center; }
    .hidden { display:none; }
    button { display:block; margin:10px auto; padding:10px 20px; font-size:18px; border-radius:8px; }
    h1,h2 { margin-top:20px; }
  </style>
</head>
<body>
  <!-- Main Menu -->
  <main id="mainMenu">
    <h1>Main Menu</h1>
    <button data-action="quick">Quick Play</button>
    <button data-action="franchise">Franchise</button>
    <button data-action="ultimate">Ultimate Team</button>
    <button data-action="practice">Practice</button>
    <button data-action="settings">Settings</button>
  </main>

  <!-- Quick Play Team Selection -->
  <main id="quickPlaySelect" class="hidden" aria-hidden="true">
    <h2>Quick Play - Team Select</h2>
    <label>Home Team:
      <select id="homeTeam">
        <option>Team A</option>
        <option>Team B</option>
        <option>Team C</option>
      </select>
    </label>
    <label>Away Team:
      <select id="awayTeam">
        <option>Team X</option>
        <option>Team Y</option>
        <option>Team Z</option>
      </select>
    </label>
    <button id="startQuickGame">Start Game</button>
    <button onclick="showMenu(mainMenu, quickPlaySelect)">Back</button>
  </main>

  <!-- Quick Play Gameplay -->
  <main id="quickPlayGame" class="hidden" aria-hidden="true">
    <h2 id="scoreboard">Team A 0 - 0 Team X | Q1</h2>
    <p id="downInfo">Ball on 25 yard line, 1st & 10</p>
    <button data-play="run">Run Play</button>
    <button data-play="pass">Pass Play</button>
    <button data-play="longpass">Long Pass</button>
    <button data-play="fieldgoal">Field Goal</button>
    <button data-play="twopoint">Two Point Conversion</button>
    <button id="nextQuarter">Next Quarter</button>
  </main>

  <!-- Halftime -->
  <main id="halftimeShow" class="hidden" aria-hidden="true">
    <h2>Halftime Show</h2>
    <p id="halftimeScore"></p>
    <button id="startSecondHalf">Start 3rd Quarter</button>
  </main>

  <!-- Postgame -->
  <main id="postGame" class="hidden" aria-hidden="true">
    <h2>Post Game Show</h2>
    <p id="finalScore"></p>
    <button onclick="showMenu(mainMenu, postGame)">Return to Main Menu</button>
  </main>

  <script>
    const mainMenu = document.getElementById('mainMenu');
    const quickPlaySelect = document.getElementById('quickPlaySelect');
    const quickPlayGame = document.getElementById('quickPlayGame');
    const halftimeShow = document.getElementById('halftimeShow');
    const postGame = document.getElementById('postGame');
    const scoreboard = document.getElementById('scoreboard');
    const downInfo = document.getElementById('downInfo');

    let homeTeam, awayTeam, homeScore, awayScore, quarter, ballOn, down, yardsToGo;

    function speak(msg){
      let u = new SpeechSynthesisUtterance(msg);
      speechSynthesis.speak(u);
      console.log("Speak:", msg);
    }

    function showMenu(show, ...hideMenus){
      show.classList.remove('hidden');
      show.setAttribute('aria-hidden','false');
      show.querySelector('button,select')?.focus();
      hideMenus.forEach(m=>{
        m.classList.add('hidden');
        m.setAttribute('aria-hidden','true');
      });
    }

    // Start Quick Play Game
    document.getElementById('startQuickGame').addEventListener('click', ()=>{
      homeTeam = document.getElementById('homeTeam').value;
      awayTeam = document.getElementById('awayTeam').value;
      homeScore = 0; awayScore = 0; quarter = 1;
      ballOn = 25; down = 1; yardsToGo = 10;
      updateScoreboard();
      updateDownInfo();
      showMenu(quickPlayGame, quickPlaySelect, mainMenu);
      speak(`Game starting. ${homeTeam} versus ${awayTeam}. Kickoff at the 25 yard line.`);
    });

    function updateScoreboard(){
      scoreboard.textContent = `${homeTeam} ${homeScore} - ${awayScore} ${awayTeam} | Q${quarter}`;
    }

    function updateDownInfo(){
      downInfo.textContent = `Ball on ${ballOn} yard line, ${ordinal(down)} & ${yardsToGo}`;
    }

    function ordinal(n){ return ["1st","2nd","3rd","4th"][n-1] || n+"th"; }

    // Offensive Plays
    quickPlayGame.querySelectorAll('button[data-play]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        let yards = 0;
        let play = btn.dataset.play;
        if(play==="run"){
          yards = Math.floor(Math.random()*2)+2; // 2-3 yards
          speak(`Run play gains ${yards} yards.`);
        } else if(play==="pass"){
          yards = Math.floor(Math.random()*6)+10; // 10-15 yards
          speak(`Pass complete for ${yards} yards.`);
        } else if(play==="longpass"){
          yards = Math.floor(Math.random()*11)+30; // 30-40 yards
          speak(`Long pass complete for ${yards} yards.`);
        } else if(play==="fieldgoal"){
          let good = Math.random()>.5;
          if(good){ homeScore+=3; speak("Field goal is good! 3 points."); }
          else{ speak("Field goal missed."); }
        } else if(play==="twopoint"){
          let success = Math.random()>.5;
          if(success){ homeScore+=2; speak("Two point conversion successful!"); }
          else{ speak("Two point conversion failed."); }
        }

        // Handle ball movement + downs
        if(play==="run"||play==="pass"||play==="longpass"){
          // check if the play would go beyond the endzone
          if(ballOn + yards >= 100){
            homeScore += 7;
            speak("Touchdown! 7 points.");
            ballOn = 25; down = 1; yardsToGo = 10;
          } else {
            ballOn += yards;
            yardsToGo -= yards;
            if(yardsToGo<=0){
              down = 1; yardsToGo = 10;
              speak("First down!");
            } else {
              down++;
              if(down>4){
                speak("Turnover on downs.");
                down = 1; yardsToGo = 10; ballOn = 25;
              }
            }
          }
        }

        updateScoreboard();
        updateDownInfo();
      });
    });

    // Quarter Button
    document.getElementById('nextQuarter').addEventListener('click', ()=>{
      if(quarter===2){
        document.getElementById('halftimeScore').textContent = scoreboard.textContent;
        showMenu(halftimeShow, quickPlayGame);
        speak("Halftime show.");
      } else if(quarter===4){
        document.getElementById('finalScore').textContent = scoreboard.textContent;
        showMenu(postGame, quickPlayGame);
        speak("Game over. Postgame show.");
      } else {
        quarter++;
        updateScoreboard();
        speak(`Quarter ${quarter} begins.`);
      }
    });

    document.getElementById('startSecondHalf').addEventListener('click', ()=>{
      quarter=3;
      updateScoreboard();
      showMenu(quickPlayGame, halftimeShow);
      speak("Second half begins. 3rd quarter.");
    });

    // Main menu buttons
    mainMenu.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        if(btn.dataset.action==='quick'){
          showMenu(quickPlaySelect, mainMenu);
          speak("Quick Play menu opened. Choose teams.");
        } else {
          speak(btn.textContent + " activated.");
        }
      });
    });
  </script>
</body>
</html>