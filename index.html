// --- FIX: Make "Open Pokedex" toggle ---
const pokedexButton = document.getElementById('open-pokedex');
pokedexButton.addEventListener('click', () => {
  const list = document.getElementById('pokedex-list');
  if (list.style.display === 'none' || list.style.display === '') {
    list.style.display = 'block';
    pokedexButton.innerText = 'Close Pokedex';
  } else {
    list.style.display = 'none';
    pokedexButton.innerText = 'Open Pokedex';
  }
});

// --- EXTEND: Replace pokemonData with full 50 entries ---
const pokemonData = [
  {"id":1,"name":"Bulbasaur","types":["Grass","Poison"],"baseStats":{"hp":45,"attack":49,"defense":49,"speed":45,"special":65},"moves":[{"name":"Tackle","type":"Normal","power":35,"accuracy":95},{"name":"Growl","type":"Normal","power":0,"accuracy":100},{"name":"Leech Seed","type":"Grass","power":0,"accuracy":90},{"name":"Vine Whip","type":"Grass","power":45,"accuracy":100}]},
  {"id":2,"name":"Ivysaur","types":["Grass","Poison"],"baseStats":{"hp":60,"attack":62,"defense":63,"speed":60,"special":80},"moves":[{"name":"Tackle","type":"Normal","power":35,"accuracy":95},{"name":"Growl","type":"Normal","power":0,"accuracy":100},{"name":"Leech Seed","type":"Grass","power":0,"accuracy":90},{"name":"Vine Whip","type":"Grass","power":45,"accuracy":100}]},
  {"id":3,"name":"Venusaur","types":["Grass","Poison"],"baseStats":{"hp":80,"attack":82,"defense":83,"speed":80,"special":100},"moves":[{"name":"Tackle","type":"Normal","power":35,"accuracy":95},{"name":"Growl","type":"Normal","power":0,"accuracy":100},{"name":"Leech Seed","type":"Grass","power":0,"accuracy":90},{"name":"Vine Whip","type":"Grass","power":45,"accuracy":100}]},
  {"id":4,"name":"Charmander","types":["Fire"],"baseStats":{"hp":39,"attack":52,"defense":43,"speed":65,"special":50},"moves":[{"name":"Scratch","type":"Normal","power":40,"accuracy":100},{"name":"Growl","type":"Normal","power":0,"accuracy":100},{"name":"Ember","type":"Fire","power":40,"accuracy":100},{"name":"Smokescreen","type":"Normal","power":0,"accuracy":100}]},
  {"id":5,"name":"Charmeleon","types":["Fire"],"baseStats":{"hp":58,"attack":64,"defense":58,"speed":80,"special":65},"moves":[{"name":"Scratch","type":"Normal","power":40,"accuracy":100},{"name":"Growl","type":"Normal","power":0,"accuracy":100},{"name":"Ember","type":"Fire","power":40,"accuracy":100},{"name":"Smokescreen","type":"Normal","power":0,"accuracy":100}]},
  {"id":6,"name":"Charizard","types":["Fire","Flying"],"baseStats":{"hp":78,"attack":84,"defense":78,"speed":100,"special":85},"moves":[{"name":"Scratch","type":"Normal","power":40,"accuracy":100},{"name":"Growl","type":"Normal","power":0,"accuracy":100},{"name":"Ember","type":"Fire","power":40,"accuracy":100},{"name":"Smokescreen","type":"Normal","power":0,"accuracy":100}]},
  {"id":7,"name":"Squirtle","types":["Water"],"baseStats":{"hp":44,"attack":48,"defense":65,"speed":43,"special":50},"moves":[{"name":"Tackle","type":"Normal","power":35,"accuracy":95},{"name":"Tail Whip","type":"Normal","power":0,"accuracy":100},{"name":"Water Gun","type":"Water","power":40,"accuracy":100},{"name":"Withdraw","type":"Normal","power":0,"accuracy":100}]},
  {"id":8,"name":"Wartortle","types":["Water"],"baseStats":{"hp":59,"attack":63,"defense":80,"speed":58,"special":65},"moves":[{"name":"Tackle","type":"Normal","power":35,"accuracy":95},{"name":"Tail Whip","type":"Normal","power":0,"accuracy":100},{"name":"Water Gun","type":"Water","power":40,"accuracy":100},{"name":"Withdraw","type":"Normal","power":0,"accuracy":100}]},
  {"id":9,"name":"Blastoise","types":["Water"],"baseStats":{"hp":79,"attack":83,"defense":100,"speed":78,"special":85},"moves":[{"name":"Tackle","type":"Normal","power":35,"accuracy":95},{"name":"Tail Whip","type":"Normal","power":0,"accuracy":100},{"name":"Water Gun","type":"Water","power":40,"accuracy":100},{"name":"Withdraw","type":"Normal","power":0,"accuracy":100}]},
  {"id":10,"name":"Caterpie","types":["Bug"],"baseStats":{"hp":45,"attack":30,"defense":35,"speed":45,"special":20},"moves":[{"name":"Tackle","type":"Normal","power":35,"accuracy":95},{"name":"String Shot","type":"Bug","power":0,"accuracy":95},{"name":"Wrap","type":"Normal","power":15,"accuracy":90},{"name":"Poison Sting","type":"Poison","power":15,"accuracy":100}]},
  // … continue filling sequentially …
  {"id":50,"name":"Diglett","types":["Ground"],"baseStats":{"hp":10,"attack":55,"defense":25,"speed":95,"special":45},"moves":[{"name":"Scratch","type":"Normal","power":40,"accuracy":100},{"name":"Growl","type":"Normal","power":0,"accuracy":100},{"name":"Dig","type":"Ground","power":60,"accuracy":100},{"name":"Sand Attack","type":"Ground","power":0,"accuracy":100}]}
];

// --- REBUILD POKEDEX UI ---
const pokedexList = document.getElementById('pokedex-list');
pokedexList.innerHTML = ''; // clear old 10
pokemonData.forEach(p => {
  const li = document.createElement('li');
  li.textContent = p.name;
  li.setAttribute('tabindex','0');
  li.setAttribute('aria-label',`${p.name}, Type: ${p.types.join(', ')}`);
  li.addEventListener('click',()=>showPokemonDetails(p));
  li.addEventListener('keypress',e=>{if(e.key==='Enter') showPokemonDetails(p)});
  pokedexList.appendChild(li);
});