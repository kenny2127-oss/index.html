<!DOCTYPE html> <html lang="en"> <head>     <meta charset="UTF-8">     <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">     <title>AI Game Creator with Audio</title>     <script src="https://cdn.tailwindcss.com"></script>     <style>         @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');                  body {             font-family: 'Inter', sans-serif;             background-color: #0f172a;             color: #f8fafc;             overflow-x: hidden;             display: flex;             flex-direction: column;             height: 100vh;         }

        .glass-panel {             background: rgba(30, 41, 59, 0.9);             backdrop-filter: blur(20px);             border-bottom: 1px solid rgba(255, 255, 255, 0.1);             box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);         }

        .game-viewport {             background: #000;             width: 100%;             height: 100%;             border: none;         }

        .input-step {             transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);             max-height: 0;             opacity: 0;             overflow: hidden;             transform: translateY(-10px);         }

        .input-step.active {             max-height: 500px;             opacity: 1;             margin-top: 1rem;             transform: translateY(0);         }

        .hidden-scrollbar::-webkit-scrollbar {             display: none;         }

        .glow-button {             box-shadow: 0 0 15px rgba(79, 70, 229, 0.4);         }     </style> </head> <body>

    <!-- Top Navigation / Input Area -->     <header class="glass-panel p-4 sticky top-0 z-50">         <div class="max-w-4xl mx-auto">             <div class="flex items-center justify-between mb-2">                 <div class="flex items-center gap-2">                     <div class="bg-indigo-600 p-1.5 rounded-lg shadow-lg">                         <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">                             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />                         </svg>                     </div>                     <h1 class="font-bold text-lg tracking-tight">GameSmith <span class="text-indigo-400 text-xs ml-1">v2.1</span></h1>                 </div>                 <button id="btn-new-game" class="px-5 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-full text-sm font-bold transition-all glow-button">                     + New Game                 </button>             </div>

            <!-- STEP 1: Title Input -->             <div id="step-title" class="input-step">                 <input id="game-title" type="text" placeholder="Game Title..."                      enterkeyhint="next"                     class="w-full bg-slate-800/80 border border-slate-600 rounded-xl px-4 py-3 text-lg font-bold focus:ring-2 focus:ring-indigo-500 outline-none placeholder:text-slate-500">             </div>

            <!-- STEP 2: Description Input -->             <div id="step-prompt" class="input-step">                 <textarea id="game-prompt" placeholder="Describe gameplay, visual style, and specific sound effects needed..."                      enterkeyhint="done"                     class="w-full h-32 bg-slate-800/80 border border-slate-600 rounded-xl px-4 py-3 text-base focus:ring-2 focus:ring-indigo-500 outline-none resize-none placeholder:text-slate-500"></textarea>                 <div class="flex justify-end mt-2">                     <button id="btn-generate" class="px-6 py-3 bg-emerald-600 hover:bg-emerald-500 rounded-xl font-bold text-sm flex items-center gap-2 shadow-lg shadow-emerald-900/20">                         <span id="btn-text">Generate with Audio</span>                         <div id="loader" class="hidden w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>                     </button>                 </div>             </div>         </div>     </header>

    <!-- Main Content -->     <main class="flex-1 flex flex-col overflow-hidden relative">                  <!-- Horizontal Game Library -->         <div class="p-4 bg-slate-900/60 border-b border-slate-800">             <div id="game-list" class="flex gap-4 overflow-x-auto pb-2 hidden-scrollbar">                 <!-- Game items populated here -->             </div>         </div>

        <!-- Game Preview -->         <div class="flex-1 relative">             <iframe id="game-frame" class="game-viewport" allow="autoplay"></iframe>                          <!-- Empty State -->             <div id="empty-state" class="absolute inset-0 flex flex-col items-center justify-center bg-slate-950 text-center p-6">                 <div class="w-20 h-20 bg-slate-900 rounded-3xl flex items-center justify-center mb-6 text-slate-700">                     <svg class="w-10 h-10" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"/></svg>                 </div>                 <h2 class="text-xl font-bold text-slate-300 mb-2">Build Your First Game</h2>                 <p class="text-slate-500 text-sm max-w-xs">Enter a title above and describe your mechanics. Every game now includes auto-generated sound effects.</p>             </div>

            <!-- Loading State -->             <div id="generating-state" class="hidden absolute inset-0 bg-slate-950/90 backdrop-blur-md flex flex-col items-center justify-center z-50">                 <div class="relative w-20 h-20 mb-6">                     <div class="absolute inset-0 border-4 border-indigo-500/20 rounded-full"></div>                     <div class="absolute inset-0 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"></div>                 </div>                 <p class="text-indigo-400 font-mono text-sm tracking-[0.3em] uppercase">Synthesizing World...</p>             </div>         </div>     </main>

    <script>         const apiKey = "";         const SYSTEM_PROMPT = `You are a professional Game Developer.          MANDATORY: Every game MUST include a "SoundManager" class using the Web Audio API.                  Guidelines for Sound:         1. NO EXTERNAL AUDIO FILES. Use procedural synthesis (oscillator nodes, gain nodes, etc.).         2. Create specific functions for: playShoot(), playExplosion(), playHit(), playJump(), playPowerup().         3. Trigger sounds on relevant game events.                  General Guidelines:         - Generate a SINGLE-FILE HTML including CSS and JS.         - Support stylized violence/gore if prompt implies it.         - Must be mobile-responsive (touch controls).         - Provide a "Click to Start" overlay (required for Web Audio API to initialize).         - Self-contained, runnable code.`;

        let games = JSON.parse(localStorage.getItem('ai_game_creator_v2_audio') || '[]');         let currentId = null;

        const listEl = document.getElementById('game-list');         const titleEl = document.getElementById('game-title');         const promptEl = document.getElementById('game-prompt');         const frameEl = document.getElementById('game-frame');         const btnNew = document.getElementById('btn-new-game');         const btnGenerate = document.getElementById('btn-generate');         const stepTitle = document.getElementById('step-title');         const stepPrompt = document.getElementById('step-prompt');         const emptyState = document.getElementById('empty-state');         const generatingState = document.getElementById('generating-state');

        function init() {             renderList();         }

        function renderList() {             listEl.innerHTML = '';             games.forEach(game => {                 const item = document.createElement('div');                 item.className = `flex-shrink-0 flex flex-col gap-2 p-4 rounded-2xl min-w-[200px] transition-all border ${currentId === game.id ? 'bg-indigo-600/20 border-indigo-500 ring-2 ring-indigo-500/50' : 'bg-slate-800 border-slate-700 hover:border-slate-500'}`;                                  item.innerHTML = `                     <div class="flex-1 cursor-pointer" onclick="loadGame('${game.id}')">                         <div class="font-bold text-sm truncate text-indigo-100">${game.title}</div>                         <div class="text-[10px] text-indigo-300/60 font-mono mt-1">${game.prompt ? 'PROCESSED' : 'DRAFT'}</div>                     </div>                     <div class="flex gap-2 pt-3 border-t border-white/5">                         <button onclick="editGame('${game.id}')" class="flex-1 py-1.5 bg-slate-700 hover:bg-slate-600 rounded-lg flex justify-center transition-colors">                             <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/></svg>                         </button>                         <button onclick="deleteGame('${game.id}')" class="flex-1 py-1.5 bg-red-900/30 hover:bg-red-900/50 text-red-400 rounded-lg flex justify-center transition-colors">                             <svg class="w-3.5 h-3.5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>                         </button>                     </div>                 `;                 listEl.appendChild(item);             });         }

        btnNew.onclick = () => {             currentId = null;             titleEl.value = '';             promptEl.value = '';             stepTitle.classList.add('active');             stepPrompt.classList.remove('active');             titleEl.focus();         };

        titleEl.addEventListener('keydown', (e) => {             if (e.key === 'Enter') {                 e.preventDefault();                 if (titleEl.value.trim()) {                     stepPrompt.classList.add('active');                     promptEl.focus();                 }             }         });

        promptEl.addEventListener('keydown', (e) => {             if (e.key === 'Enter' && !e.shiftKey) {                 e.preventDefault();                 generateGame();             }         });

        async function generateGame() {             const title = titleEl.value.trim();             const prompt = promptEl.value.trim();             if (!title || !prompt) return;

            setLoading(true);                          try {                 const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {                     method: 'POST',                     headers: { 'Content-Type': 'application/json' },                     body: JSON.stringify({                         contents: [{ parts: [{ text: `Game Title: ${title}. Mechanics: ${prompt}. Include procedural sounds for everything.` }] }],                         systemInstruction: { parts: [{ text: SYSTEM_PROMPT }] }                     })                 });

                const data = await response.json();                 let html = data.candidates?.[0]?.content?.parts?.[0]?.text || "";                                  if (html.includes('```html')) html = html.split('```html')[1].split('```')[0].trim();                 else if (html.includes('```')) html = html.split('```')[1].split('```')[0].trim();

                if (html) {                     if (currentId) {                         const idx = games.findIndex(g => g.id === currentId);                         games[idx] = { ...games[idx], title, prompt, html };                     } else {                         const id = Date.now().toString();                         games.unshift({ id, title, prompt, html });                         currentId = id;                     }                     saveAndRefresh();                     loadGame(currentId);                 }             } catch (err) {                 console.error(err);             } finally {                 setLoading(false);             }         }

        function loadGame(id) {             currentId = id;             const game = games.find(g => g.id === id);             frameEl.srcdoc = game.html;             emptyState.classList.add('hidden');             stepTitle.classList.remove('active');             stepPrompt.classList.remove('active');             renderList();         }

        window.editGame = (id) => {             currentId = id;             const game = games.find(g => g.id === id);             titleEl.value = game.title;             promptEl.value = game.prompt;             stepTitle.classList.add('active');             stepPrompt.classList.add('active');             titleEl.focus();         };

        window.deleteGame = (id) => {             games = games.filter(g => g.id !== id);             if (currentId === id) {                 currentId = null;                 frameEl.srcdoc = '';                 emptyState.classList.remove('hidden');             }             saveAndRefresh();         };

        function saveAndRefresh() {             localStorage.setItem('ai_game_creator_v2_audio', JSON.stringify(games));             renderList();         }

        function setLoading(isLoading) {             btnGenerate.disabled = isLoading;             document.getElementById('loader').classList.toggle('hidden', !isLoading);             generatingState.classList.toggle('hidden', !isLoading);         }

        init();     </script> </body> </html>