<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessible Madden Prototype</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #111;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
  }
  .menu, .submenu {
    margin: 10px 0;
  }
  button, select {
    font-size: 1.2em;
    margin: 5px;
    padding: 10px 20px;
  }
</style>
</head>
<body>

<h1>Accessible Madden Prototype</h1>

<!-- Main Menu -->
<div id="mainMenu" class="menu">
  <button onclick="openQuickPlay()">Quick Play</button>
  <button onclick="openFranchise()">Franchise</button>
  <button onclick="openPractice()">Practice</button>
  <button onclick="openUltimateTeam()">Ultimate Team</button>
  <button onclick="openSettings()">Settings</button>
</div>

<!-- Quick Play Menu -->
<div id="quickPlayMenu" class="submenu" style="display:none;">
  <button onclick="startPlay('Play Now')">Play Now</button>
  <button onclick="startPlay('Pro Bowl')">Pro Bowl</button>
  <button onclick="startPlay('Super Bowl 59: Chiefs vs Eagles')">Super Bowl 59</button>
  <button onclick="backToMain()">Back</button>
</div>

<!-- Settings Menu -->
<div id="settingsMenu" class="submenu" style="display:none;">
  <label for="difficulty">Difficulty:</label>
  <select id="difficulty">
    <option>Rookie</option>
    <option>Pro</option>
    <option>All-Pro</option>
    <option>All-Madden</option>
  </select><br>
  
  <label for="quarterLength">Quarter Length (min):</label>
  <select id="quarterLength">
    <option>2</option>
    <option selected>5</option>
    <option>10</option>
    <option>15</option>
  </select><br>

  <label for="gameSpeed">Game Speed:</label>
  <select id="gameSpeed">
    <option>Slow</option>
    <option selected>Normal</option>
    <option>Fast</option>
  </select><br>

  <!-- Crowd Volume Slider Display -->
  <div id="volumeDisplay">Crowd Volume: 50%</div>

  <button onclick="backToMain()">Back</button>
</div>

<!-- Commentary Area -->
<div id="commentary" style="margin-top:20px; max-width: 500px;">
</div>

<!-- Crowd Audio -->
<audio id="crowdSound" loop>
  <source src="https://www.soundjay.com/crowd/crowd-cheer-01.mp3" type="audio/mpeg">
</audio>

<script>
const commentaryDiv = document.getElementById('commentary');
const crowdAudio = document.getElementById('crowdSound');
let crowdVolume = 0.5;
crowdAudio.volume = crowdVolume;

// Start crowd sound loop
crowdAudio.play().catch(() => { console.log('Audio autoplay blocked') });

// Swipe up/down to adjust crowd volume
let touchStartY = null;
document.addEventListener('touchstart', e => { touchStartY = e.touches[0].clientY; });
document.addEventListener('touchend', e => {
  if (touchStartY === null) return;
  const touchEndY = e.changedTouches[0].clientY;
  const delta = touchStartY - touchEndY;
  if (delta > 30) { // swipe up
    crowdVolume = Math.min(crowdVolume + 0.1, 1);
  } else if (delta < -30) { // swipe down
    crowdVolume = Math.max(crowdVolume - 0.1, 0);
  }
  crowdAudio.volume = crowdVolume;
  document.getElementById('volumeDisplay').innerText = `Crowd Volume: ${Math.round(crowdVolume*100)}%`;
  speak(`Crowd volume ${Math.round(crowdVolume*100)} percent`);
  touchStartY = null;
});

// Simple TTS function
function speak(text) {
  if ('speechSynthesis' in window) {
    const msg = new SpeechSynthesisUtterance(text);
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(msg);
  }
}

// Main Menu Functions
function openQuickPlay() {
  document.getElementById('mainMenu').style.display = 'none';
  document.getElementById('quickPlayMenu').style.display = 'block';
  speak("Quick Play menu. Choose Play Now, Pro Bowl, or Super Bowl 59: Chiefs vs Eagles.");
}

function openFranchise() {
  document.getElementById('mainMenu').style.display = 'none';
  speak("Franchise mode. Start new franchise or continue if you have one.");
}

function openPractice() {
  document.getElementById('mainMenu').style.display = 'none';
  speak("Practice mode. Choose drills or free play.");
}

function openUltimateTeam() {
  document.getElementById('mainMenu').style.display = 'none';
  speak("Ultimate Team mode. Coming soon.");
}

function openSettings() {
  document.getElementById('mainMenu').style.display = 'none';
  document.getElementById('settingsMenu').style.display = 'block';
  speak("Settings menu. Choose difficulty, quarter length, game speed, and adjust crowd volume.");
}

function backToMain() {
  document.getElementById('mainMenu').style.display = 'block';
  document.getElementById('quickPlayMenu').style.display = 'none';
  document.getElementById('settingsMenu').style.display = 'none';
  speak("Main menu. Quick Play, Franchise, Practice, Ultimate Team, Settings.");
}

// Quick Play Start
function startPlay(type) {
  speak(`Starting ${type}. First down and ten at the 25-yard line. Choose your play.`);
  commentaryDiv.innerHTML = `Game started: ${type}. Commentary will appear here.`;
  // Trigger crowd cheer for starting drive
  triggerCrowd('startDrive');
}

// Crowd reactions for events
function triggerCrowd(eventType) {
  if(eventType === 'touchdown') {
    speak("Touchdown! Crowd erupts!");
    crowdAudio.play();
  } else if(eventType === 'interception') {
    speak("Turnover! Crowd reacts!");
    crowdAudio.play();
  } else if(eventType === 'startDrive') {
    speak("The crowd is ready as the 49ers take the field!");
    crowdAudio.play();
  }
}
</script>

</body>
</html>