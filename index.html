<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Survive the Wild â€“ Audio Edition</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<button id="start">Start Game</button>

<script>
const speech = window.speechSynthesis;

const game = {
  day: 1,
  health: 100,
  hunger: 0,
  thirst: 0,
  inventory: { food: 1, wood: 0 },
  menuIndex: 0,
  lastMessage: ""
};

const menu = [
  { label: "Explore", action: explore },
  { label: "Forage", action: forage },
  { label: "Rest", action: rest },
  { label: "Check inventory", action: checkInventory }
];

function speak(text) {
  speech.cancel();
  const u = new SpeechSynthesisUtterance(text);
  game.lastMessage = text;
  speech.speak(u);
}

function statusReport() {
  speak(
    `Day ${game.day}. Health ${game.health}. Hunger ${game.hunger}. Thirst ${game.thirst}. 
    ${menu[game.menuIndex].label}.`
  );
}

function nextTurn() {
  game.day++;
  game.hunger += 10;
  game.thirst += 10;

  if (game.hunger >= 100 || game.thirst >= 100) game.health -= 20;

  if (game.health <= 0) {
    speak("You collapse from exhaustion. Game over.");
    document.removeEventListener("keydown", handleInput);
    return;
  }

  statusReport();
}

function explore() {
  const r = Math.random();
  if (r < 0.4) {
    game.inventory.food++;
    speak("You find edible berries.");
  } else if (r < 0.7) {
    game.inventory.wood++;
    speak("You gather some wood.");
  } else {
    game.health -= 10;
    speak("You injure yourself while exploring.");
  }
  nextTurn();
}

function forage() {
  game.inventory.food++;
  game.hunger = Math.max(0, game.hunger - 20);
  speak("You forage and eat some food.");
  nextTurn();
}

function rest() {
  game.health = Math.min(100, game.health + 20);
  speak("You rest and recover.");
  nextTurn();
}

function checkInventory() {
  speak(`Inventory. Food ${game.inventory.food}. Wood ${game.inventory.wood}.`);
}

function handleInput(e) {
  if (e.key === "ArrowUp") {
    game.menuIndex = (game.menuIndex - 1 + menu.length) % menu.length;
    speak(menu[game.menuIndex].label);
  }

  if (e.key === "ArrowDown") {
    game.menuIndex = (game.menuIndex + 1) % menu.length;
    speak(menu[game.menuIndex].label);
  }

  if (e.key === "Enter") {
    menu[game.menuIndex].action();
  }

  if (e.key.toLowerCase() === "r") {
    speak(game.lastMessage);
  }
}

document.getElementById("start").addEventListener("click", () => {
  document.getElementById("start").remove();
  document.addEventListener("keydown", handleInput);
  speak("Welcome to Survive the Wild. Use arrow keys to navigate. Press enter to choose.");
});
</script>
</body>
</html>