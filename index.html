<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pokémon Adventure</title>
  <link rel="stylesheet" href="style.css">

  <!-- ✅ PWA support -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#3b4cca">

  <!-- iOS support -->
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("✅ Service Worker registered"))
        .catch(err => console.error("❌ Service Worker failed", err));
    }
  </script>
</head>
<body>
  <div id="app">
    <header>
      <h1 id="tabTitle">Home Tab Selected</h1>
      <nav>
        <button class="tab-button" data-tab="home" aria-label="Home Tab">Home</button>
        <button class="tab-button" data-tab="explore" aria-label="Explore Tab">Explore</button>
        <button class="tab-button" data-tab="battle" aria-label="Battle Tab">Battle</button>
        <button class="tab-button" data-tab="trade" aria-label="Trade with other players Tab">Trade</button>
      </nav>
    </header>

    <main id="tabContent">
      <section id="home" class="tab active">
        <h2>Pokédex</h2>
        <div id="pokedex"></div>
        <button id="transferButton">Transfer Pokédex from another app</button>
      </section>

      <section id="explore" class="tab">
        <h2>Explore</h2>
        <p>Catch Pokémon while exploring!</p>
        <button id="catchBtn">Catch Pokémon</button>
      </section>

      <section id="battle" class="tab">
        <h2>Battle</h2>
        <p>Battle mode coming soon!</p>
      </section>

      <section id="trade" class="tab">
        <h2>Trade with other players</h2>
        <p>Select one of your Pokémon to generate a short code for trading.</p>
        <button id="offerPokemonBtn">Offer Pokémon</button>
        <div id="tradeResult"></div>
      </section>
    </main>
  </div>

  <script src="script.js"></script>

  <!-- ✅ Service Worker inline fallback (for quick testing) -->
  <script id="inline-sw" type="javascript/worker">
    self.addEventListener("install", (event) => {
      event.waitUntil(
        caches.open("poke-cache").then((cache) => {
          return cache.addAll([
            "./index.html",
            "./style.css",
            "./script.js"
          ]);
        })
      );
    });

    self.addEventListener("fetch", (event) => {
      event.respondWith(
        caches.match(event.request).then((response) => {
          return response || fetch(event.request);
        })
      );
    });
  </script>
</body>
</html>