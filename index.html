<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>Audio-First Monsters Mobile</title>
<style>
:root{--bg:#071021;--panel:#0f1720;--text:#e6edf3;--accent:#5eead4;--muted:#9fb0c0}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
#app{display:flex;flex-direction:column;height:100%}
.panel{flex:1;overflow:auto;padding:12px;background:var(--panel)}
.tab-bar{display:flex;height:60px;background:#12202b;border-top:1px solid #23313f}
.tab-bar button{flex:1;background:none;border:none;color:var(--text);font-size:16px;cursor:pointer}
.tab-bar button.active{background:#1f2a3a}
.controls{display:flex,gap:8px,margin-top:6px}
.log{height:120px;overflow:auto;padding:6px;background:#061019;border-radius:8px;font-family:ui-monospace,monospace;margin-top:8px}
.btn{padding:10px 12px;border-radius:10px;background:#0b1220;border:1px solid #21313f;color:var(--text);font-size:16px;margin:4px;flex:1;text-align:center}
#battleActions{display:flex;flex-wrap:wrap;gap:4px;margin-top:8px}
</style>
</head>
<body>
<div id="app">
  <div id="panelContent" class="panel"></div>
  <div class="tab-bar">
    <button data-tab="explore" class="active">Explore</button>
    <button data-tab="battle">Battle</button>
    <button data-tab="market">Market</button>
    <button data-tab="party">Party</button>
    <button data-tab="inventory">Inventory</button>
  </div>
</div>
<div class="sr-only" id="live-assert" aria-live="assertive" aria-atomic="true"></div>
<div class="sr-only" id="live-polite" aria-live="polite" aria-atomic="false"></div>
<script>
(() => {
const panelContent = document.getElementById('panelContent');
const livePolite = document.getElementById('live-polite');
const liveAssert = document.getElementById('live-assert');
let useTTS = true;
let lastUtter = '';
function speak(text, priority='polite'){ lastUtter=text; const target = priority==='assertive'?liveAssert:livePolite; target.textContent=''; setTimeout(()=>target.textContent=text,10); if(!useTTS || !('speechSynthesis' in window)) return; try{ const u = new SpeechSynthesisUtterance(text); speechSynthesis.cancel(); speechSynthesis.speak(u);}catch(e){} }
function log(msg,priority='polite'){ const d=document.createElement('div'); d.textContent=msg; panelContent.appendChild(d); speak(msg,priority); panelContent.scrollTop=panelContent.scrollHeight; }

class Monster{constructor(name,max,atk,moves,level=1){this.name=name;this.max=max;this.hp=max;this.atk=atk;this.moves=moves.map(m=>Object.assign({},m));this.level=level;this.xp=0} isFainted(){return this.hp<=0}}
function mkMove(id,name,power,pp){return {id,name,power,pp,maxpp:pp}}
const BASE={peck:mkMove('peck','Peck',6,25),tackle:mkMove('tackle','Tackle',7,25),splash:mkMove('splash','Splash',4,30)};
const WILDS={ grass:[{name:'Weedmite',hp:12,atk:4,moves:[BASE.peck,BASE.tackle]}], forest:[{name:'Leafrat',hp:16,atk:5,moves:[BASE.tackle]}], plain:[{name:'Fieldog',hp:15,atk:5,moves:[BASE.tackle]}], lake:[{name:'Splashit',hp:16,atk:5,moves:[BASE.splash]}] };
const MAP=[['grass','grass','forest'],['plain','town','plain'],['forest','grass','lake']];
let state={player:{x:1,y:1},party:[new Monster('Sparrowmon',20,5,[BASE.peck,BASE.tackle])],potions:3,balls:5,gold:30,inBattle:false,enemy:null};

function renderExplore(){panelContent.innerHTML=''; log(`You are at ${MAP[state.player.y][state.player.x]}. Use the buttons to move.`); const btns=['Up','Down','Left','Right']; btns.forEach(d=>{ const b=document.createElement('button'); b.className='btn'; b.textContent=d; b.onclick=()=>moveDir(d); panelContent.appendChild(b); })}
function renderParty(){panelContent.innerHTML=''; state.party.forEach((m,i)=>{ const d=document.createElement('div'); d.textContent=`${i===0?'> ':''}${m.name} Lv${m.level} HP ${m.hp}/${m.max}`; panelContent.appendChild(d); }); }
function,  renderInventory(){panelContent.innerHTML=''; const p=document.createElement('div'); p.textContent=`Potions ${state.potions} Â· Balls ${state.balls}`; panelContent.appendChild(p); }
function renderMarket(){panelContent.innerHTML=''; const buyPotion=document.createElement('button'); buyPotion.className='btn'; buyPotion.textContent='Buy Potion 5G'; buyPotion.onclick=()=>{if(state.gold>=5){state.gold-=5;state.potions++; log('Bought a potion.');}else{log('Not enough gold.')}}; panelContent.appendChild(buyPotion);
const buyBall=document.createElement('button'); buyBall.className='btn'; buyBall.textContent='Buy Ball 10G'; buyBall.onclick=()=>{if(state.gold>=10){state.gold-=10;state.balls++; log('Bought a ball.');}else{log('Not enough gold.')}}; panelContent.appendChild(buyBall);}
function renderBattle(){panelContent.innerHTML=''; if(!state.inBattle || !state.enemy){ log('No active battle.'); return;} log(`Battle vs ${state.enemy.name} HP ${state.enemy.hp}`); state.party[0].moves.forEach(m=>{ const b=document.createElement('button'); b.className='btn'; b.textContent=`${m.name} (${m.pp})`; b.onclick=()=>playerAttack(m.id); panelContent.appendChild(b); }); const potionBtn=document.createElement('button'); potionBtn.className='btn'; potionBtn.textContent='Potion'; potionBtn.onclick=playerPotion; panelContent.appendChild(potionBtn);
const ballBtn=document.createElement('button'); ballBtn.className='btn'; ballBtn.textContent='Throw Ball'; ballBtn.onclick=captureAttempt; panelContent.appendChild(ballBtn);
const runBtn=document.createElement('button'); runBtn.className='btn'; runBtn.textContent='Run'; runBtn.onclick=playerRun; panelContent.appendChild(runBtn);}

function moveDir(dir){ if(state.inBattle){log('Cannot move during battle');return;} let dx=0,dy=0; if(dir==='Up') dy=-1;if(dir==='Down') dy=1;if(dir==='Left') dx=-1;if(dir==='Right') dx=1; const nx=state.player.x+dx,ny=state.player.y+dy;if(nx<0||ny<0||nx>=MAP[0].length||ny>=MAP.length){log('Cannot move there'); return;} state.player.x=nx; state.player.y=ny; log(`Moved to ${nx},${ny}`); tryEncounter(); }

function calcDamage(attacker,move){return Math.max(1, move.power+attacker.atk+Math.floor(Math.random()*3)-1)}
function enemyAct(){if(!state.enemy) return; const e=state.enemy,p=state.party[0]; const mv=e.moves.find(m=>m.pp>0)||e.moves[0]; if(mv.pp>0) mv.pp--; const dmg=calcDamage(e,mv); p.hp=Math.max(0,p.hp-dmg); log(`${e.name} uses ${mv.name}. ${p.name} loses ${dmg} HP.`); if(p.hp<=0){log(`${p.name} fainted. Game over.`); state.inBattle=false; state.enemy=null;} }
function playerAttack(moveId){if(!state.inBattle||!state.enemy){log('No battle'); return;} const p=state.party[0]; const mv=p.moves.find(m=>m.id===moveId); if(!mv||mv.pp<=0){log('Move not available'); return;} mv.pp--; const dmg=calcDamage(p,mv); state.enemy.hp=Math.max(0,state.enemy.hp-dmg); log(`${p.name} used ${mv.name}. ${state.enemy.name} loses ${dmg} HP.`); if(state.enemy.hp<=0){log(`${state.enemy.name} defeated.`); state.inBattle=false; state.enemy=null;}else{setTimeout(enemyAct,500);}}
function playerPotion(){if(state.potions<=0){log('No potions'); return;} const p=state.party[0]; const heal=Math.min(p.max-p.hp,12); if(heal<=0){log('Already full HP'); return;} state.potions--; p.hp+=heal; log(`Potion used. ${p.name} healed ${heal} HP.`); setTimeout(enemyAct,500);}
function playerRun(){if(Math.random()<0.6){log('Escaped'); state.inBattle=false; state.enemy=null;}else{log('Failed to run'); setTimeout(enemyAct,500);}}
function captureAttempt(){if(!state.inBattle||!state.enemy){log('No target'); return;} if(state.balls<=0){log('No balls'); return;} const e=state.enemy; const chance=0.25+((e.max-e.hp)/e.max)*0.5; state.balls--; log(`Threw ball at ${e.name}`); if(Math.random()<chance){log(`${e.name} captured!`); if(state.party.length<6) state.party.push(new Monster(e.name,e.max,e.atk,e.moves,e.level)); state.inBattle=false; state.enemy=null;}else{log(`${e.name} broke free`); setTimeout(enemyAct,500);}}

function,  tryEncounter(force=false){if(state.inBattle) return false; const tile=MAP[state.player.y][state.player.x]; if(tile==='town') return false; const pool=WILDS[tile]||[]; if(!pool.length) return false; if(!force && Math.random()>=0.3) return false; const base=pool[Math.floor(Math.random()*pool.length)]; state.enemy=new Monster(base.name,base.hp,base.atk,base.moves); state.inBattle=true; log(`A wild ${state.enemy.name} appeared!`); return true;}

const tabs=document.querySelectorAll('.tab-bar button'); tabs.forEach(b=>{b.addEventListener('click',()=>{tabs.forEach(t=>t.classList.remove('active')); b.classList.add('active'); switch(b.dataset.tab){case 'explore': renderExplore(); break; case 'battle': renderBattle(); break; case 'market': renderMarket(); break; case 'party': renderParty(); break; case 'inventory': renderInventory(); break;}})});

function init(){renderExplore(); log('Welcome to Audio-First Monsters,  Mobile.');}
init();
})();
</script>
</body>
</html>
, In list, 20 items